(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{243:function(e,t,a){e.exports=a(632)},348:function(e,t){},349:function(e,t){},630:function(e,t,a){},632:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"setCountries",function(){return J}),a.d(n,"setIndicators",function(){return Q}),a.d(n,"setLocation",function(){return X}),a.d(n,"setCountryValue",function(){return K}),a.d(n,"setIndicatorValue",function(){return Z}),a.d(n,"setWidgetData",function(){return $}),a.d(n,"setWidgetStats",function(){return ee}),a.d(n,"setWidth",function(){return te}),a.d(n,"default",function(){return ae});var r={};a.r(r),a.d(r,"setMap",function(){return oe}),a.d(r,"setMapBounds",function(){return ie}),a.d(r,"setMapStyle",function(){return se}),a.d(r,"setMapLabels",function(){return le}),a.d(r,"setMapRoads",function(){return ue}),a.d(r,"setBasemap",function(){return de}),a.d(r,"setMapViewport",function(){return pe}),a.d(r,"setMapLoaded",function(){return me}),a.d(r,"setMapFlying",function(){return fe}),a.d(r,"getCountryBounds",function(){return be}),a.d(r,"default",function(){return he});var c={};a.r(c),a.d(c,"setCountriesData",function(){return _e}),a.d(c,"loadDashboardData",function(){return Te}),a.d(c,"getIndicators",function(){return xe}),a.d(c,"getCountriesData",function(){return Pe}),a.d(c,"getProvincesData",function(){return Be}),a.d(c,"default",function(){return Fe});var o={};a.r(o),a.d(o,"setDashboardCollapsed",function(){return qe}),a.d(o,"setModalState",function(){return We}),a.d(o,"setCountry",function(){return Ue}),a.d(o,"setIndicator",function(){return ze}),a.d(o,"setUrl",function(){return Ve}),a.d(o,"saveData",function(){return Ge});var i={};a.r(i),a.d(i,"default",function(){return He});var s={};a.r(s),a.d(s,"actions",function(){return o}),a.d(s,"initialState",function(){return Ye}),a.d(s,"reducers",function(){return i});var l={};a.r(l),a.d(l,"default",function(){return Je});var u={};a.r(u),a.d(u,"actions",function(){return c}),a.d(u,"initialState",function(){return Qe}),a.d(u,"reducers",function(){return l});var d={};a.r(d),a.d(d,"pageActions",function(){return Ze}),a.d(d,"setPage",function(){return $e});var p={};a.r(p),a.d(p,"default",function(){return et});var m={};a.r(m),a.d(m,"actions",function(){return d}),a.d(m,"initialState",function(){return tt}),a.d(m,"reducers",function(){return p});var f={};a.r(f),a.d(f,"default",function(){return at});var b={};a.r(b),a.d(b,"actions",function(){return r}),a.d(b,"initialState",function(){return nt}),a.d(b,"reducers",function(){return f});var h={};a.r(h),a.d(h,"setList",function(){return rt}),a.d(h,"setLoading",function(){return ct}),a.d(h,"setError",function(){return ot}),a.d(h,"setLayersOpacity",function(){return it}),a.d(h,"getLayers",function(){return st}),a.d(h,"default",function(){return lt});var g={};a.r(g),a.d(g,"default",function(){return ut});var v={};a.r(v),a.d(v,"actions",function(){return h}),a.d(v,"initialState",function(){return dt}),a.d(v,"reducers",function(){return g});var O={};a.r(O),a.d(O,"default",function(){return pt});var y={};a.r(y),a.d(y,"actions",function(){return n}),a.d(y,"initialState",function(){return mt}),a.d(y,"reducers",function(){return O});var E=a(1),j=a.n(E),w=a(63),k=a.n(w),A=a(19),N=a(17),C=a(3),D=a(91),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e&&t&&D.a.event(Object(C.a)({category:e,action:t},!!a&&{label:a}))},M=a(4),L=a(52),R=a(234),I=a(235),_=a(6),T=a(242),x=a(35),P=a(36),B=a(236),F=a.n(B),q=new(function(){function e(){Object(x.a)(this,e)}return Object(P.a)(e,[{key:"saveAsJSON",value:function(e){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));this.triggerDownload("dataset.json",t)}},{key:"saveAsCSV",value:function(e){var t=e.map(function(e){var t=e.indicators,a=Object(T.a)(e,["indicators"]);return t?Object(C.a)({},a,Object.fromEntries(Object.entries(e.indicators).flatMap(function(e){return Object.entries(e[1]).map(function(t){return["".concat(e[0],"_").concat(t[0]),t[1]]})}))):Object(C.a)({},a)}),a=Object.keys(t[0]),n=F.a.parse(t,{fields:a}),r="data:text/csv;charset=utf-8,"+encodeURIComponent(n);this.triggerDownload("dataset.csv",r)}},{key:"saveRankings",value:function(){var e="".concat(".","/Aqueduct30_Rankings_V01.xlsx");this.triggerDownload("Aqueduct30_Rankings_V01.xlsx",e)}},{key:"triggerDownload",value:function(e,t){var a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",e),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}]),e}()),W=[{label:"Baseline Water Stress",value:"bws"},{label:"Drought Risk",value:"drr"},{label:"Riverine Flood Risk",value:"rfr"}],U={Tot:"Total",Dom:"Domestic",Ind:"Industrial",Irr:"Agricultural",Liv:"Livestock",Pop:"Population",Avg:"Average"},z={MISSING_REQUIRED_PARAMETER:"Required parameter is not present.",MISSING_WIDGET_REQUEST_PARAMETERS:"Cannot make widget data request. Missing parameters."};function V(e){return e.filter(function(e){return"Tot"!==e.category}).reduce(function(e,t,a,n){var r=n.length;return a===r-1?(e+t.score)/r:e+t.score},0)}function G(e){return e?e.toFixed(2):"NO DATA"}function H(e){if(1===e.length){var t=e[0];return Object(M.a)({},t.category,{name:U[t.category],score:G(t.score),rank:t.rank})}return e.reduce(function(t,a){var n;return Object(C.a)({},t,(n={},Object(M.a)(n,a.category,{name:U[a.category],score:G(a.score),rank:a.rank}),Object(M.a)(n,"Avg",{name:U.Avg,score:V(e).toFixed(2)}),n))},{})}var Y=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"country";return{iso:e,name:t[0][a],indicators:H(t)}},J=Object(_.createAction)("DASHBOARD/setCountries"),Q=Object(_.createAction)("DASHBOARD/setIndicators"),X=Object(_.createAction)("DASHBOARD/setLocation"),K=Object(_.createAction)("DASHBOARD/setCountryValue"),Z=Object(_.createAction)("DASHBOARD/setIndicatorValue"),$=Object(_.createAction)("DASHBOARD/setWidgetData"),ee=Object(_.createAction)("DASHBOARD/setWidgetStats"),te=Object(_.createAction)("DASHBOARD/setWidth"),ae={setLocation:X,setCountryValue:K,setIndicatorValue:Z},ne={GENERAL:"GENERAL",COUNTRY:"COUNTRY"},re=a(42),ce=a.n(re),oe=Object(_.createAction)("MAP/setMap"),ie=Object(_.createAction)("MAP/setMapBounds"),se=Object(_.createAction)("MAP/setMapStyle"),le=Object(_.createAction)("MAP/setMapLabels"),ue=Object(_.createAction)("MAP/setMapRoads"),de=Object(_.createAction)("MAP/setBasemap"),pe=Object(_.createAction)("MAP/setMapViewport"),me=Object(_.createAction)("MAP/setMapLoaded"),fe=Object(_.createAction)("MAP/setMapFlying"),be=Object(_.createThunkAction)("MAP/getCountryBounds",function(){return function(e,t){var a=t().dashboard,n=a.locationId,r=a.width,c="SELECT ST_AsGeoJSON(ST_AsText(ST_Envelope(the_geom))) as geometry, gid_0, name_0 FROM gadm_wri_0 WHERE gid_0 = '".concat(n,"'");ce.a.get("https://wri-rw.carto.com/api/v2/sql?q=".concat(c)).then(function(t){var a=t.data.rows;if(a.length<1)return e(ie({bbox:[-180,90,180,-90]}));var n=JSON.parse(a[0].geometry),c=window.L.geoJSON(n).getBounds().toBBoxString().split(",").map(function(e){return parseFloat(e)});e(ie({bbox:c,options:{paddingTopLeft:[r,0]}}))})}}),he={setMap:oe,setMapBounds:ie,setMapStyle:se,setBasemap:de,setMapLabels:le,setMapRoads:ue,setMapViewport:pe,setMapLoaded:me,setMapFlying:fe,getCountryBounds:be},ge=a(25),ve=a.n(ge),Oe=a(158),ye=a(65),Ee=a(46),je=a(73),we=a.n(je),ke=function(e){var t=e.id,a=e.type,n=e.attributes;return Object.assign({},{id:t,type:a},n)},Ae=function(e){var t=e.id,a=e.type,n=e.attributes,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=Object.assign({},{id:t,type:a},n);return Object.prototype.hasOwnProperty.call(c,"widget")&&(c.widget=c.widget.map(ke)),Object.prototype.hasOwnProperty.call(c,"layer")&&(c.layer=c.layer.map(ke)),Object.prototype.hasOwnProperty.call(c,"metadata")&&(c.metadata=c.metadata.map(ke),r.locale&&(c.metadata=c.metadata.find(function(e){return e.language===r.locale})||{})),Object.prototype.hasOwnProperty.call(c,"vocabulary")&&(c.vocabulary=c.vocabulary.map(ke)),Object.prototype.hasOwnProperty.call(c,"legendConfig")&&Object.prototype.hasOwnProperty.call(c.legendConfig,"items")&&(c.legendConfig.items=c.legendConfig.items.map(function(e,t){var a=Object.assign({},e);return a.id=a.id||t,a})),c},Ne=function(e){var t=e.data,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&Array.isArray(t)?t.map(function(e){return Ae(e,a)}):Ae(t,a)};var Ce,De,Se,Me,Le,Re=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n={length:0,sum:null,max:null,min:null};return e.reduce(function(e,r){var c=we()(r,t),o=a(r);return("iso"===t?r.country:r.province)?(r.score&&(n.length++,n.sum+=r.score,n.min?r.score<n.min&&(n.min=r.score):n.min=r.score,n.max?r.score>n.max&&(n.max=r.score):n.max=r.score),e[c]?e[c].push(o):e[c]=[o],e):e},{_stats:n})},Ie=new(function(){function e(){Object(x.a)(this,e),this.client=ce.a.create({baseURL:"https://staging-api.globalforestwatch.org/v1",headers:{"Content-Type":"application/json"}})}return Object(P.a)(e,[{key:"fetchLayersFromDataset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.client.get("/dataset/".concat(e,"/layer"),{params:t}).then(function(e){var t=e.status,a=e.statusText,n=e.data;if(t>=400)throw new Error(a);return Ne(n)})}},{key:"fetchDatasetsLayers",value:function(e){var t=this,a=Object.entries(e).reduce(function(e,a){return[[].concat(Object(ye.a)(e[0]),[a[0]]),[].concat(Object(ye.a)(e[1]),[t.fetchLayersFromDataset(a[1])])]},[[],[]]),n=Object(Ee.a)(a,2),r=n[0],c=n[1];return ce.a.all(c).then(function(e){return r.reduce(function(t,a,n){return Object(C.a)({},t,Object(M.a)({},a,e[n]))},{})})}},{key:"fetchDatasetWidgets",value:function(e){var t=this,a=we()(e,"widget.id",null),n=we()(e,"widget.params",null),r=we()(e,"params",{});if(a&&n)return this.client("/widget/".concat(a),r).then(function(e){var t=e.status,a=e.statusText,n=e.data;if(t>=400)throw new Error(a);return Ne(n)}).then(function(e){var a=t.processWidgetData(e,n);return ce.a.get(a)}).then(function(t){var a=t.status,n=t.statusText,r=t.data;if(a>=400)throw new Error(n);return Re(r.rows,e.indexKey,function(t){return{country:"iso"===e.indexKey?t.country:t.province,category:t.weight,score:t.score,rank:t.score_ranked}})});throw new Error(z.MISSING_WIDGET_REQUEST_PARAMETERS)}},{key:"processWidgetData",value:function(e,t){var a=e.widgetConfig,n=a.data;return a.params_config.reduce(function(e,a){var n=a.key;if(a.required&&!t[n])throw new Error(z.MISSING_REQUIRED_PARAMETER);return e.replace("{{".concat(n,"}}"),"'".concat(t[n],"'"))},n[0].url)}}]),e}()),_e=Object(_.createAction)("DATA/setCountriesData"),Te=Object(_.createThunkAction)("DATA/loadDashboardData",function(){return function(e,t){var a=t().router.query||{},n=a.country,r=a.indicator;e(xe()),r&&e(Z({data:r})),e(Pe()).then(function(t){var a=Object.entries(t).filter(function(e){return"_stats"!==e[0]}).map(function(e){return Y(e[0],e[1])});n?e(Ue({data:n.toUpperCase()})):(e(ee({data:t._stats})),e($({data:a})))})}}),xe=Object(_.createThunkAction)("DATA/getIndicators",function(){return function(e){e(Q({data:W})),e(Z({data:W[0].value}))}}),Pe=Object(_.createThunkAction)("DATA/getCountriesData",function(){return function(){var e=Object(Oe.a)(ve.a.mark(function e(t,a){var n,r,c;return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a().dashboard,r=n.indicators.value){e.next=4;break}return e.abrupt("return");case 4:return c={widget:{id:"e6e5d286-212b-48d8-b5f4-1678cded82bc",params:{indicator:r}},indexKey:"iso"},e.next=7,Ie.fetchDatasetWidgets(c).then(function(e){var a=Object.entries(e).filter(function(e){return"_stats"!==e[0]}).map(function(e){return{label:e[1][0].country,value:e[0]}}).sort(function(e,t){return e.label&&t.label?e.label.localeCompare(t.label):-1});return t(J({data:a})),t(_e({data:e})),e});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}),Be=Object(_.createThunkAction)("DATA/getProvincesData",function(){return function(){var e=Object(Oe.a)(ve.a.mark(function e(t,a){var n,r,c,o;return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a().dashboard,r=n.locationId,c=n.indicators.value){e.next=4;break}return e.abrupt("return");case 4:return o={widget:{id:"4b3d6e89-869c-45b6-88e3-28735d2b60fe",params:{indicator:c,iso:r}},indexKey:"province"},e.next=7,Ie.fetchDatasetWidgets(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()}),Fe={getIndicators:xe,getCountriesData:Pe,getProvincesData:Be},qe=Object(_.createAction)("APP/setDashboardCollapsed"),We=Object(_.createAction)("APP/setModalState"),Ue=Object(_.createThunkAction)("APP/setCountry",function(e){return function(t){t(X(e)),t(K(e)),t(Ve({params:{country:e.data}})),t(be(e.data));var a=e.data?Be:Pe;t(a()).then(function(e){var a=Object.entries(e).filter(function(e){return"_stats"!==e[0]}).map(function(e){return Y(e[0],e[1])});t(ee({data:e._stats})),t($({data:a}))}),e.data||t(ie({bbox:[-180,90,180,-90]}))}}),ze=Object(_.createThunkAction)("APP/setIndicator",function(e){return function(t,a){t(Z(e)),t(Ve({params:{indicator:e.data}}));var n=a().dashboard.scope;t((n===ne.COUNTRY?Be:Pe)()).then(function(e){var a=Object.entries(e).filter(function(e){return"_stats"!==e[0]}).map(function(e){return Y(e[0],e[1])});t(ee({data:e._stats})),t($({data:a}))})}}),Ve=Object(_.createThunkAction)("APP/saveData",function(e){var t=e.params,a=e.replace;return function(e,n){var r=n().router,c=r.type,o=r.query,i=a?Object(C.a)({},t):Object(C.a)({},o,t);e({type:c,query:Object.fromEntries(Object.entries(i).filter(function(e){return Boolean(e[1])}))})}}),Ge=Object(_.createThunkAction)("APP/saveData",function(){return function(){q.saveRankings(),S("[AQ-Country-Ranking] Download","user downloads ranking","click")}}),He=(Ce={},Object(M.a)(Ce,Ue,function(e,t){var a=t.payload;return Object(C.a)({},e,{country:a.value})}),Object(M.a)(Ce,qe,function(e,t){var a=t.payload;return Object(C.a)({},e,{isDashboardCollapsed:Boolean(a)})}),Object(M.a)(Ce,We,function(e,t){var a=t.payload,n=a.isOpen,r=a.content;return Object(C.a)({},e,{isModalOpen:Boolean(n),modalContent:r})}),Ce),Ye={isDashboardCollapsed:!1,isModalOpen:!1,modalContent:null},Je=(De={},Object(M.a)(De,_e,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{countries:Object(C.a)({},e.countries,{data:a})})}),Object(M.a)(De,"DATA/getCountries_STARTED",function(e){return Object(C.a)({},e,{countries:Object(C.a)({},e.countries,{isLoading:!0})})}),Object(M.a)(De,"DATA/getCountries_SUCCEEDED",function(e){return Object(C.a)({},e,{countries:Object(C.a)({},e.countries,{isLoading:!1,isLoaded:!0})})}),Object(M.a)(De,"DATA/getIndicators_STARTED",function(e){return Object(C.a)({},e,{indicators:Object(C.a)({},e.indicators,{isLoading:!0})})}),Object(M.a)(De,"DATA/getIndicators_SUCCEEDED",function(e){return Object(C.a)({},e,{indicators:Object(C.a)({},e.indicators,{isLoading:!1,isLoaded:!0})})}),Object(M.a)(De,"DATA/getWidgetData_STARTED",function(e){return Object(C.a)({},e,{widget:Object(C.a)({},e.widget,{isLoading:!0})})}),Object(M.a)(De,"DATA/getWidgetData_SUCCEEDED",function(e){return Object(C.a)({},e,{widget:Object(C.a)({},e.widget,{isLoading:!1,isLoaded:!0})})}),De),Qe={countries:{data:null,isLoading:!1,isLoaded:!1,error:null},provinces:{cache:[],data:null,isLoading:!1,isLoaded:!1,error:null},indicators:{data:null,isLoading:!1,isLoaded:!1,error:null}},Xe=a(41),Ke=[{name:"HOME",path:"/:iso?/:indicator?",page:"home"},{name:Xe.NOT_FOUND,path:"/404",page:"not-found"}],Ze=Ke.reduce(function(e,t){return Object(C.a)({},e,Object(M.a)({},t.name,Object(_.createAction)("PAGES/".concat(t.name))))},{}),$e=Object(_.createAction)("PAGES/setPage"),et=Object.keys(Ze).reduce(function(e,t){return Object(C.a)({},e,Object(M.a)({},t,function(e){return function(t,a){var n=a.payload;return Object(C.a)({},t,{current:e,payload:n})}}(t)))},{}),tt={current:"HOME"},at=(Se={},Object(M.a)(Se,oe,function(e,t){var a=t.payload;return Object(C.a)({},e,a)}),Object(M.a)(Se,ie,function(e,t){var a=t.payload;return Object(C.a)({},e,{bounds:a})}),Object(M.a)(Se,de,function(e,t){var a=t.payload;return Object(C.a)({},e,{basemap:a})}),Object(M.a)(Se,se,function(e,t){var a=t.payload;return Object(C.a)({},e,{mapStyle:a})}),Object(M.a)(Se,le,function(e,t){var a=t.payload;return Object(C.a)({},e,{mapLabels:a})}),Object(M.a)(Se,ue,function(e,t){var a=t.payload;return Object(C.a)({},e,{mapRoads:a})}),Object(M.a)(Se,pe,function(e,t){var a=t.payload;return Object(C.a)({},e,{viewport:a})}),Object(M.a)(Se,me,function(e,t){var a=t.payload;return Object(C.a)({},e,{settings:{isLoaded:a}})}),Object(M.a)(Se,fe,function(e,t){var a=t.payload;return Object(C.a)({},e,{settings:{isFlying:a}})}),Se),nt={viewport:{zoom:2,latitude:41.145218001222204,longitude:-8.61132408966133},basemap:"hydro"},rt=Object(_.createAction)("LAYERS/setList"),ct=Object(_.createAction)("LAYERS/setLoading"),ot=Object(_.createAction)("LAYERS/setError"),it=Object(_.createAction)("LAYERS/setLayersOpacity"),st=Object(_.createThunkAction)("LAYERS/getLayers",function(){return function(e){e(ct(!0)),e(ot(null));return Ie.fetchDatasetsLayers({country_rankings:"fd4b4ba5-a16a-45a4-bc6b-954397e37bda",province_rankings:"e0adfbfb-441d-4ec5-9e4c-7d051d0f7b22"}).then(function(t){e(rt(t)),e(ct(!1))}).catch(function(t){e(ot(t)),e(ct(!1))})}}),lt={setList:rt,setLoading:ct,setError:ot,getLayers:st,setLayersOpacity:it},ut=(Me={},Object(M.a)(Me,rt,function(e,t){var a=t.payload;return Object(C.a)({},e,{list:a})}),Object(M.a)(Me,ct,function(e,t){var a=t.payload;return Object(C.a)({},e,{isLoading:Boolean(a)})}),Object(M.a)(Me,ot,function(e,t){var a=t.payload;return Object(C.a)({},e,{error:a})}),Object(M.a)(Me,it,function(e,t){var a=t.payload;return Object(C.a)({},e,{list:{country_rankings:e.list.country_rankings.map(function(e){return Object(C.a)({},e,{opacity:a})}),province_rankings:e.list.province_rankings.map(function(e){return Object(C.a)({},e,{opacity:a})})}})}),Me),dt={list:null,isLoading:!1,isLoaded:!1,error:null},pt=(Le={},Object(M.a)(Le,J,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{countries:Object(C.a)({},e.countries,{list:a})})}),Object(M.a)(Le,Q,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{indicators:Object(C.a)({},e.indicators,{list:a})})}),Object(M.a)(Le,X,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{locationId:a,scope:a?ne.COUNTRY:ne.GENERAL})}),Object(M.a)(Le,K,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{countries:Object(C.a)({},e.countries,{value:a})})}),Object(M.a)(Le,Z,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{indicators:Object(C.a)({},e.indicators,{value:a})})}),Object(M.a)(Le,$,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{widget:Object(C.a)({},e.widget,{data:a})})}),Object(M.a)(Le,ee,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{widget:Object(C.a)({},e.widget,{stats:a})})}),Object(M.a)(Le,te,function(e,t){var a=t.payload.data;return Object(C.a)({},e,{width:a})}),Le),mt={scope:ne.GENERAL,locationId:null,width:null,countries:{list:[],value:null},indicators:{list:[],value:null},widget:{data:[]}},ft=a(237),bt=a.n(ft),ht=Ke.reduce(function(e,t){return Object(C.a)({},e,Object(M.a)({},t.name,Object(C.a)({path:t.path},{thunk:t.thunk})))},{}),gt={basename:"/applications/aqueduct/country-rankings/",location:"router",notFoundPath:"".concat("/applications/aqueduct/country-rankings/","404"),initialDispatch:!1,querySerializer:bt.a},vt=Object(Xe.connectRoutes)(ht,gt),Ot=[{namespace:"app",components:s},{namespace:"data",components:u},{namespace:"page",components:m},{namespace:"map",components:b},{namespace:"layers",components:v},{namespace:"dashboard",components:y}],yt=vt.initialDispatch,Et=vt.reducer,jt=vt.middleware,wt=vt.enhancer,kt=Object(L.combineReducers)(Object(C.a)({router:Et},Ot.reduce(function(e,t){return Object(C.a)({},e,Object(M.a)({},t.namespace,Object(_.handleModule)(t.components)))},{}))),At=Object(L.applyMiddleware)(jt,R.a),Nt=Object(I.composeWithDevTools)(wt,At),Ct=Object(L.createStore)(kt,Nt);yt();var Dt=Ct,St=Object(A.b)(function(e){return{}},{})(N.Modal),Mt=a(55),Lt=a(53),Rt=a(54),It=a(238),_t=a.n(It),Tt=a(18),xt=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(Mt.a)(this,Object(Lt.a)(t).call(this,e))).state={copied:!1},a}return Object(Rt.a)(t,e),Object(P.a)(t,[{key:"componentWillMount",value:function(){this.props.getShareUrl(window.location.href)}},{key:"componentDidMount",value:function(){var e=this;this.clipboard=new _t.a(this.btn),this.clipboard.on("success",function(t){e.setState({copied:!0}),setTimeout(function(){e.setState({copied:!1}),t.clearSelection()},2e3)}),this.clipboard.on("error",function(){e.setState({error:!0}),setTimeout(function(){e.setState({error:!1})},2e3)})}},{key:"triggerPopup",value:function(e){e&&e.preventDefault();var t=(window.innerWidth-575)/2,a=(window.innerHeight-400)/2,n=e.currentTarget.href,r="status=1,width=".concat(575,",height=").concat(400,",top=").concat(a,",left=").concat(t);window.open(n,"Share this analysis",r)}},{key:"render",value:function(){var e=this,t="Water and Food Security Analyzer",a=this.props.share.url||window.location.href,n=encodeURIComponent(this.props.share.url||window.location.href),r="Copy",c="";return this.state.copied&&(r="Copied",c="-success"),this.state.error&&(r="Error",c="-error"),j.a.createElement("div",{className:"c-share"},j.a.createElement("div",{className:"share-header"},j.a.createElement("h3",{className:"share-title"},"Share this page")),j.a.createElement("div",{className:"share-content"},j.a.createElement("div",{className:"share-button"},j.a.createElement("input",{id:"url",className:"share-url",value:a,readOnly:!0,onFocus:function(e){return e.currentTarget.select()}}),j.a.createElement("button",{"data-clipboard-target":"#url",ref:function(t){e.btn=t},className:"c-btn -primary ".concat(c),type:"button"},r)),j.a.createElement("div",{className:"share-sozial"},j.a.createElement("a",{href:"https://twitter.com/share?url=".concat(n),target:"_blank",rel:"noopener noreferrer",className:"c-btn -primary -with-icon -twitter -social",onClick:this.triggerPopup},j.a.createElement(Tt.Icon,{name:"icon-twitter"}),j.a.createElement("span",null,"Twitter")),j.a.createElement("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(n,"&t=").concat(t),target:"_blank",rel:"noopener noreferrer",className:"c-btn -primary -with-icon -facebook -social",onClick:this.triggerPopup},j.a.createElement(Tt.Icon,{name:"icon-facebook"}),j.a.createElement("span",null,"Facebook")),j.a.createElement("a",{href:"https://www.linkedin.com/shareArticle?mini=true&url=".concat(n,"&title=").concat(t,"&summary=&source="),target:"_blank",rel:"noopener noreferrer",className:"c-btn -primary -with-icon -linkedin -social",onClick:this.triggerPopup},j.a.createElement(Tt.Icon,{name:"icon-linkedin"}),j.a.createElement("span",null,"Linkedin")))))}}]),t}(j.a.Component);xt.defaultProps={share:{},getShareUrl:function(e){return e}};var Pt=function(){return j.a.createElement("div",{className:"c-info"},j.a.createElement("div",{className:"info-header"},j.a.createElement("div",{className:"info-titles"},j.a.createElement("span",{className:"info-title"},"Water Risk Indicator"))),j.a.createElement("div",{className:"info-description"},j.a.createElement("dl",null,j.a.createElement("dt",null,"Baseline Water Stress"),j.a.createElement("br",null),j.a.createElement("dd",null,"Baseline water stress measures the ratio of total water withdrawals to available renewable water supplies. Water withdrawals include domestic, industrial, irrigation and livestock consumptive and non-consumptive uses. Available renewable water supplies include surface and groundwater supplies and considers the impact of upstream consumptive water users and large dams on downstream water availability. Higher values indicate more competition among users."),j.a.createElement("br",null),j.a.createElement("dt",null,"Drought Risk"),j.a.createElement("br",null),j.a.createElement("dd",null,"Drought risk measures where droughts are likely to occur, the population and assets exposed, and the vulnerability of the population and assets to suffering adverse effects. Higher values indicate higher risk of drought."),j.a.createElement("br",null),j.a.createElement("dt",null,"Coastal Flood Risk"),j.a.createElement("br",null),j.a.createElement("dd",null,"Coastal flood risk measures the percentage of population expected to be affected by coastal flooding in an average year, accounting for existing flood protection standards. Higher values indicate greater proportion of the population is expected to be impacted by coastal floods."),j.a.createElement("br",null),j.a.createElement("dt",null,"Source: "),j.a.createElement("dd",null,j.a.createElement("a",{href:"https://www.wri.org/publication/aqueduct-30"},"Aqueduct 2019")," aggregated to a country and sub-national level using the methods described in Aqueduct ",j.a.createElement("a",{href:"https://www.wri.org/publication/aqueduct-country-and-river-basin-rankings"},"2013")))))},Bt=a(74),Ft=Object(Bt.a)([function(e){return e.data}],function(e){return e.countries.data}),qt=Object(Bt.a)([function(e){return e.dashboard}],function(e){return e.locationId}),Wt=Object(Bt.a)([qt,Ft],function(e,t){return e?Y(e,t[e]):null}),Ut={container:function(e){return Object(C.a)({},e,{height:"40px"})},valueContainer:function(e){return Object(C.a)({},e,{height:"40px",marginLeft:"16px"})}},zt=function(){return j.a.createElement("div",{className:"country-selector--icon"},j.a.createElement(Tt.Icon,{className:"-small",name:"icon-search"}))};function Vt(e){var t=e.countries,a=e.setCountry;return j.a.createElement(N.CustomSelect,{theme:"light",placeholder:"Search a country",options:t.list,onChange:function(e){a({data:e.value}),S("[AQ-Country-Ranking] Countries","user selects a country",e.label)},customClass:"c-country-selector",styles:Ut,components:{IndicatorsContainer:zt},value:t.value})}Vt.defaultProps={setCountry:function(){console.log("Country value was changed.")}};var Gt=Vt,Ht={setCountry:Ue},Yt=Object(A.b)(function(e){return{countries:e.dashboard.countries}},Ht)(Gt),Jt=a(120),Qt=a.n(Jt);function Xt(e){var t=e.indicators,a=e.setIndicator,n=e.setModalState,r=e.className;return j.a.createElement(N.Field,{name:"indication-filter",label:"Select Water Risk Indicator",className:"-bigger",customClass:"c-indicator-selector",theme:"light",onMoreInfo:function(){n({isOpen:!0,content:"indicators"})}},j.a.createElement(N.CustomSelect,{theme:"light",options:t.list,onChange:function(e){a({data:e.value}),S("[AQ-Country-Ranking] Indicators","user selects an indicator",e.label)},customClass:Qt()("indicator-selector--select",Object(M.a)({},r,Boolean(r))),value:t.value}))}Xt.defaultProps={setIndicator:function(){console.log("Indicator value was changed.")}};var Kt=Xt,Zt={setIndicator:ze,setModalState:We},$t=Object(A.b)(function(e){return{indicators:e.dashboard.indicators}},Zt)(Kt),ea=function(){return j.a.createElement("header",{className:"c-header"},j.a.createElement("div",{className:"header--content"},j.a.createElement(Yt,null),j.a.createElement($t,null),j.a.createElement("p",{className:"header--disclaimer"},"This map is for illustrative purposes and does not imply the expression of any opinion on the part of WRI concerning the legal status of any country or territory, or concerning the delimitation of frontiers or boundaries.")))},ta=function(e){var t=e.onBackClick,a=e.data,n=["Irr","Dom","Ind","Tot"],r=Object.fromEntries(Object.entries(a.indicators).filter(function(e){return n.includes(e[0])}).sort(function(e,t){return n.indexOf(e[0])-n.indexOf(t[0])}));return j.a.createElement("header",{className:"c-header"},j.a.createElement("div",{className:"header--back-button",onClick:function(){return t()}},j.a.createElement(Tt.Icon,{className:"-small",name:"icon-arrow-left"}),j.a.createElement("span",{className:"-uppercase"},"Country Rankings")),j.a.createElement("div",{className:"header--content"},j.a.createElement("div",{className:"header--info"},j.a.createElement("h1",null,a.name),j.a.createElement(N.Field,{name:"header-indicators",label:"Summary Results",className:"-bigger"},j.a.createElement("ul",{className:"header--indicators"},Object.entries(r).map(function(e){return j.a.createElement("li",{className:"header--indicator",key:e[0]},e[1].name,": ",e[1].score)})))),j.a.createElement($t,{className:"header--indicator-selector"}),j.a.createElement("p",{className:"header--disclaimer"},"This map is for illustrative purposes and does not imply the expression of any opinion on the part of WRI concerning the legal status of any country or territory, or concerning the delimitation of frontiers or boundaries.")))};ta.defaultProps={onBackClick:function(){console.log("Go back button was pressed.")}};var aa=ta,na=function(e){var t=e.className,a=e.height,n=e.width,r=e.fill;return j.a.createElement("div",{className:t,style:{display:"inline-block",backgroundColor:r,height:a,width:n}})};na.defaultProps={height:"11px",width:"11px",fill:"#000000"};var ra=na,ca=function(e){var t=e.indicators,a=e.config,n=a.fields,r=a.palette,c=a.length;if(!t)return null;var o=function(e,t){return e[t%e.length]};return j.a.createElement(E.Fragment,null,n.map(function(e,a){if(!t[e])return null;var n=t[e].score;return j.a.createElement("div",{key:e},j.a.createElement("span",{className:"widget--chart-text"},"".concat(n)),j.a.createElement(ra,{fill:o(r,a),width:"".concat(c(n),"px")}))}))},oa=function(e){var t=e.classes,a=e.rowNumber,n=e.country,r=e.chartConfig;return j.a.createElement("div",{className:Qt()("c-widget",Object(M.a)({},t.row,Boolean(t.row)))},j.a.createElement("div",{className:t.columns[0]},a),j.a.createElement("div",{className:t.columns[1]},n.name),j.a.createElement("div",{className:t.columns[2]},j.a.createElement(ca,{indicators:n.indicators,config:r})),Object.values(n.indicators).length>1?j.a.createElement("div",{className:t.columns[3]},n.indicators.Tot&&n.indicators.Tot.score):null)},ia=["#3FA989","#00A0E1","#4A596A"],sa=["Irr","Dom","Ind","Pop"],la={row:"widgets--content-row",columns:["widgets--row-number","widgets--name","widgets--chart","widgets--total"]},ua=function(e){var t=e.title,a=e.buttonText,n=e.data,r=e.onSelect,c=n.data,o=n.stats;if(!c.length||0===c.length)return null;var i=Object.entries(c[0].indicators).filter(function(e){return sa.includes(e[0])}).sort(function(e,t){return sa.indexOf(e[0])-sa.indexOf(t[0])}).map(function(e,t){return j.a.createElement("div",{className:"widgets--content-legend",key:e},j.a.createElement(ra,{className:"widgets--content-bullet",fill:ia[t]}),e[1].name)}),s={fields:sa,palette:ia,length:function(e){return 1+(e-o.min)/o.max*75}},l=c.sort(function(e,t){var a=e.indicators,n=a.Tot,r=a.Pop,c=t.indicators,o=c.Tot,i=c.Pop;return n&&o&&n.score&&o.score?parseFloat(o.score)-parseFloat(n.score):r&&i&&r.score&&i.score?parseFloat(i.score)-parseFloat(r.score):0});return j.a.createElement("div",{className:"c-widgets"},j.a.createElement("div",{className:"widgets--header"},j.a.createElement("span",{className:"-uppercase"},t),j.a.createElement("button",{type:"button",onClick:r},a)),j.a.createElement("div",{className:"widgets--content-wrapper"},j.a.createElement("div",{className:"widgets--content-header"},j.a.createElement("div",{className:la.columns[0]},"Rank"),j.a.createElement("div",{className:la.columns[1]},"Name"),j.a.createElement("div",{className:la.columns[2]},"Sectoral Score",i),Object.values(l[0].indicators).length>1?j.a.createElement("div",{className:la.columns[3]},"Total Score"):null),j.a.createElement("div",{className:"widgets--content-body"},l.map(function(e,t){return j.a.createElement(oa,{classes:la,key:e.iso,rowNumber:t+1,country:e,chartConfig:s})}))))};ua.defaultProps={title:"Water Usage (Score)",buttonText:"Download ranking"};var da=ua,pa=function(e){return e.scope===ne.GENERAL?null:j.a.createElement("footer",{className:"c-footer"},j.a.createElement(N.Field,{name:"countries-filter",label:"Explore more",className:"-bigger"},j.a.createElement(Yt,null)))},ma=function(e){var t=e.width,a=e.setWidth,n=e.scope,r=e.headerData,c=e.widget,o=e.setCountry,i=e.saveData,s=Object(E.useRef)(null);Object(E.useEffect)(function(){var e=s.current.offsetWidth;e!==t&&a({data:e})});var l=n===ne.GENERAL?"Country Rankings":"Sub-national Rankings";return j.a.createElement("div",{ref:s,className:"dashboard"},n===ne.GENERAL?j.a.createElement(ea,null):j.a.createElement(aa,{data:r,onBackClick:function(){return o({data:null})}}),j.a.createElement(da,{data:c,onSelect:i,title:l}),j.a.createElement(pa,{scope:n}))},fa={setCountry:Ue,saveData:Ge,setWidth:te},ba=Object(A.b)(function(e){return{scope:e.dashboard.scope,width:e.dashboard.width,headerData:Wt(e),widget:e.dashboard.widget}},fa)(ma),ha=function(e){function t(){return Object(x.a)(this,t),Object(Mt.a)(this,Object(Lt.a)(t).apply(this,arguments))}return Object(Rt.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.props.activeLayer.legendConfig;return e&&"choropleth"===e.type?j.a.createElement("div",null,j.a.createElement("ul",{className:"c-legend-type-choropleth"},e.items.map(function(e){var t=e.name,a=e.value,n=e.color;return j.a.createElement("li",{key:"legend-choropleth-item-".concat(t||a)},j.a.createElement("div",{className:"icon-choropleth",style:{backgroundColor:n}}),j.a.createElement("span",{className:"name"},t),j.a.createElement("span",{className:"name"},a))})),e.disclaimer&&j.a.createElement("div",{className:"graph -basic -disclaimer"},j.a.createElement("div",{className:"graph-list"},e.disclaimer.map(function(e){return j.a.createElement("div",{className:"graph-list-item",key:e.name},j.a.createElement("span",{className:"color",style:{background:e.color}}),j.a.createElement("span",{className:"label"},e.name))})))):null}}]),t}(j.a.PureComponent);ha.defaultProps={activeLayer:{}};var ga=ha,va=a(118),Oa=a(239),ya=a.n(Oa),Ea={url:"https://wri-rw.carto.com/api/v1/map/named/waater_cranking/all/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank" rel="noopener noreferrer">OpenStreetMap</a>'}},ja={osm:{id:"osm",value:"https://api.tiles.mapbox.com/v4/wri.c974eefc/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoid3JpIiwiYSI6IjU3NWNiNGI4Njc4ODk4MmIyODFkYmJmM2NhNDgxMWJjIn0.v1tciCeBElMdpnrikGDrPg",label:"Light",options:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank" rel="noopener noreferrer">OpenStreetMap</a>'}},satellite:{id:"satellite",value:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",label:"Satellite",options:{attribution:'&copy; <a href="https://www.google.com/maps/@15,-2.970703,3z?hl=es" target="_blank">Google</a>'}},terrain:{id:"terrain",value:"https://api.mapbox.com/styles/v1/resourcewatch/cjhqi456h02pg2rp6w2mwp61c/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicmVzb3VyY2V3YXRjaCIsImEiOiJjajFlcXZhNzcwMDBqMzNzMTQ0bDN6Y3U4In0.FRcIP_yusVaAy0mwAX1B8w",label:"Terrain",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}},hydro:{id:"hydro",value:"https://api.mapbox.com/styles/v1/resourcewatch/cjtr6fhr3060g1fok829tfwm7/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicmVzb3VyY2V3YXRjaCIsImEiOiJjajFlcXZhNzcwMDBqMzNzMTQ0bDN6Y3U4In0.FRcIP_yusVaAy0mwAX1B8w",label:"Hydrography",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}}},wa=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(Mt.a)(this,Object(Lt.a)(t).call(this,e))).state={active:!1},a._onScreenClick=a.onScreenClick.bind(Object(va.a)(a)),a}return Object(Rt.a)(t,e),Object(P.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onScreenClick)}},{key:"onScreenClick",value:function(e){var t=document.querySelector(".c-basemap-tooltip");t&&t.contains&&!t.contains(e.target)&&this.toggleDropdown(!1)}},{key:"onBasemapChange",value:function(e){var t=e.value;this.props.setBasemap(t)}},{key:"toggleDropdown",value:function(e){var t=this,a="undefined"!==typeof e&&null!==e?e:!this.state.active;this.setState({active:a}),requestAnimationFrame(function(){e?window.addEventListener("click",t._onScreenClick):window.removeEventListener("click",t._onScreenClick)}),this.setState({active:a})}},{key:"render",value:function(){var e=this,t=this.props.basemap,a=this.state.active;return j.a.createElement(ya.a,{attachment:"top right",constraints:[{to:"window"}],targetOffset:"8px 100%",classes:{element:"c-basemap-tooltip -arrow-right"}},j.a.createElement("button",{type:"button",className:"basemap-button",onClick:function(){return e.toggleDropdown(!0)}},j.a.createElement(N.Icon,{name:"layers",className:"-small"})),a&&j.a.createElement("div",null,j.a.createElement(N.RadioGroup,{items:Object.keys(ja).map(function(e){var t=ja[e];return{label:t.label,value:t.id}}),name:"basemap",selected:t,onChange:function(t){e.onBasemapChange(t)}}),j.a.createElement("div",{className:"divisor"})))}}]),t}(E.PureComponent),ka=Object(A.b)(function(e){return{basemap:e.map.basemap}},{setBasemap:de})(wa),Aa=a(240),Na=a(159),Ca=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Mt.a)(this,(e=Object(Lt.a)(t)).call.apply(e,[this].concat(r)))).state={latlng:null,interactions:{}},a}return Object(Rt.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=void 0===a?"":a,r=t.viewport,c=t.layers,o=t.bounds,i=t.basemap,s=t.setLayersOpacity,l=t.setModalState,u=Object(C.a)({},ja[i||"osm"],{url:ja[i||"osm"].value}),d={customClass:n,mapOptions:{zoom:r.zoom,center:{lat:r.latitude,lng:r.longitude}},bounds:o,basemap:u,label:Ea,events:{zoomend:function(e,t){},dragend:function(e,t){}}},p=c&&c.length?c.map(function(e){return{name:e.name,dataset:e.dataset,layers:[Object(C.a)({},e,{active:!0})]}}):[],m=function(){l({isOpen:!0,content:"share"}),S("[AQ-Country-Ranking] Share","user opens share modal","click")};return j.a.createElement(Tt.Map,d,function(t){window.m=t;return j.a.createElement(E.Fragment,null,j.a.createElement(Na.LayerManager,{map:t,plugin:Aa.a,onReady:function(){}},c.map(function(t){return j.a.createElement(Na.Layer,Object.assign({key:t.id},t,!!t.interactionConfig&&!!t.interactionConfig.output&&!!t.interactionConfig.output.length&&{interactivity:"carto"!==t.provider&&"cartodb"!==t.provider||t.interactionConfig.output.map(function(e){return e.column}),events:{click:function(t){e.setState({interactionData:t.data,latlng:t.latlng})}}}))})),j.a.createElement(Tt.MapControls,null,j.a.createElement(Tt.ZoomControl,{map:t}),j.a.createElement(ka,null),j.a.createElement("button",{type:"button",onClick:m},j.a.createElement(Tt.Icon,{className:"-medium",name:"icon-share"}))),j.a.createElement(Tt.MapPopup,{map:t,latlng:e.state.latlng,data:{latlng:e.state.latlng,interactions:e.state.interactions}},e.state.interactionData?j.a.createElement("div",{className:"c-map-popup"},j.a.createElement("div",{className:"popup-header"},e.state.interactionData.name_1?j.a.createElement(j.a.Fragment,null,j.a.createElement("h3",null,e.state.interactionData.name_1),j.a.createElement("h4",null,e.state.interactionData.name_0)):j.a.createElement("h3",null,e.state.interactionData.name_0)),j.a.createElement(function(e){var t=e.score;return t?j.a.createElement("div",null,"Score: ".concat(t.toFixed(2))):null},{score:e.state.interactionData.score}),j.a.createElement("div",null,e.state.interactionData.label)):j.a.createElement("div",null,"No data")),j.a.createElement("div",{className:"c-legend"},j.a.createElement(Tt.Legend,{sortable:!1},p.map(function(e,t){return j.a.createElement(Tt.LegendListItem,{index:t,key:e.dataset,layerGroup:e,onChangeOpacity:function(e,t){return s(t)},toolbar:j.a.createElement(Tt.LegendItemToolbar,null,j.a.createElement(Tt.LegendItemButtonOpacity,{trackStyle:{backgroundColor:"#2E57B8"},handleStyle:{backgroundColor:"#2E57B8"}}))},j.a.createElement(Tt.LegendItemTypes,null,j.a.createElement(ga,null)))}))))})}}]),t}(E.Component);Ca.defaultProps={children:null,viewport:{zoom:2,lat:0,lng:0},bounds:{},dragPan:!0,dragRotate:!0,onViewportChange:function(){},onLoad:function(){},onStyleLoad:function(){},setMapViewport:function(){},layers:[]};var Da=Ca,Sa={bws:0,drr:1,rfr:2},Ma=Object(Bt.a)([function(e){return e.layers.list},function(e){return e.dashboard.scope},function(e){return e.dashboard.locationId},function(e){return e.dashboard.indicators.value}],function(e,t,a,n){if(!e)return[];var r=Sa[n];if("COUNTRY"===t){var c=e.province_rankings[r];return[Object(C.a)({},c,{opacity:c.opacity||.5,params:Object(C.a)({},c.params,{iso:a})})]}return[Object(C.a)({},e.country_rankings[r],{opacity:e.country_rankings[r].opacity||.5})]}),La={setMapViewport:pe,setMapBounds:ie,setMapLoaded:me,setMapFlying:fe,setLayersOpacity:it,setModalState:We},Ra=Object(A.b)(function(e){return Object(C.a)({},e.map,{layers:Ma(e),scope:e.dashboard.scope})},La)(Da);var Ia=function(e){var t=e.isDashboardCollapsed,a=e.isModalOpen,n=e.modalContent,r=e.setDashboardCollapsed,c=e.setModalState;return j.a.createElement("main",{className:"c-main"},j.a.createElement(N.Sidebar,{customClass:"c-aqueduct-sidebar",onToggle:function(e){r(!e)},visible:!t},j.a.createElement(ba,null)),j.a.createElement("div",{className:"map-wrapper"},j.a.createElement(Ra,{className:"c-aqueduct-map"})),j.a.createElement(St,{isOpen:a,appElement:"#root",onRequestClose:function(){return c({isOpen:!1,content:null})}},function(e){switch(e){case"share":return j.a.createElement(xt,null);case"indicators":return j.a.createElement(Pt,null);default:return j.a.createElement(j.a.Fragment,null)}}(n)))},_a={setDashboardCollapsed:qe,getLayers:st,setModalState:We},Ta=Object(A.b)(function(e){return Object(C.a)({},e.app)},_a)(Ia),xa=function(e){var t=e.getLayers,a=e.loadDashboardData;return Object(E.useEffect)(function(){t(),a(),D.a.set({page:"".concat(window.location.pathname).concat(window.location.search)}),D.a.pageview("".concat(window.location.pathname).concat(window.location.search))},[t,a]),j.a.createElement(Ta,null)},Pa=function(){return j.a.createElement("div",null,j.a.createElement("h1",null,"Not found"))},Ba=new Map([["HOME",xa],["LOCATION",xa]]),Fa=function(e){var t=e.page.current,a=Ba.has(t)?Ba.get(t):Pa;return j.a.createElement(a,e)},qa={getLayers:st,loadDashboardData:Te},Wa=Object(A.b)(function(e){return{page:e.page}},qa)(Fa);a(418),a(630);D.a.initialize("UA-1981881-3");k.a.render(j.a.createElement(function(){return j.a.createElement(A.a,{store:Dt},j.a.createElement(N.Icons,null),j.a.createElement("div",{className:"header--wrapper"},j.a.createElement(N.Header,{title:"Country Rankings",appRoute:"/applications/aqueduct/country-rankings/"},j.a.createElement("ul",{className:"list"},j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://www.wri.org/aqueduct#aqueduct-tools",target:"_blank",rel:"noopener noreferrer"},"Tools")),j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://wri.org/aqueduct/blog",target:"_blank",rel:"noopener noreferrer"},"Blog")),j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://wri.org/aqueduct/publications",target:"_blank",rel:"noopener noreferrer"},"Publications")),j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://wri.org/aqueduct/data",target:"_blank",rel:"noopener noreferrer"},"Data")),j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://wri.org/aqueduct/user-stories",target:"_blank",rel:"noopener noreferrer"},"User Stories")),j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://wri.org/aqueduct/about",target:"_blank",rel:"noopener noreferrer"},"About")),j.a.createElement("li",null,j.a.createElement("a",{className:"c-header-button",href:"https://wri.org/aqueduct/subscribe",target:"_blank",rel:"noopener noreferrer"},"Subscribe"))))),j.a.createElement(Wa,null))},null),document.getElementById("root"))}},[[243,1,2]]]);
//# sourceMappingURL=main.701f9941.chunk.js.map